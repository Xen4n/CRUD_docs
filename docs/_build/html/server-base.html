<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="ru">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Наполнение сервера &mdash; Документация CRUD_docs 1</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Документация CRUD_docs 1" href="index.html" />
    <link rel="next" title="Создание страниц и оформления" href="frontend.html" />
    <link rel="prev" title="Создание проекта" href="createproject.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             accesskey="I">указатель</a></li>
        <li class="right" >
          <a href="frontend.html" title="Создание страниц и оформления"
             accesskey="N">вперёд</a> |</li>
        <li class="right" >
          <a href="createproject.html" title="Создание проекта"
             accesskey="P">назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация CRUD_docs 1</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-base">
<span id="id1"></span><h1>Наполнение сервера<a class="headerlink" href="#server-base" title="Ссылка на этот заголовок">¶</a></h1>
<p>После настройки сервера нам нужно привязать к нему ранее созданную базу.</p>
<div class="section" id="id2">
<h2>Привязка к базе<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>В директории <strong>main</strong> -&gt; <strong>resources</strong> создадим файл <code class="docutils literal"><span class="pre">application.properties</span></code> и запишем в него
конфигурацию доступа к нашей базе MySQL:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">jdbc</span><span class="o">.</span><span class="n">driverClassName</span> <span class="o">=</span> <span class="n">com</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">jdbc</span><span class="o">.</span><span class="n">Driver</span>
<span class="n">jdbc</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">jdbc</span><span class="p">:</span><span class="n">mysql</span><span class="p">:</span><span class="o">//</span><span class="n">localhost</span><span class="p">:</span><span class="mi">3306</span><span class="o">/</span><span class="n">cars_db</span>
<span class="n">jdbc</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">root</span>
<span class="n">jdbc</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="mi">0000</span>
</pre></div>
</div>
<p>Теперь укажем эти настройки серверу. В пакете <code class="docutils literal"><span class="pre">com.scrud.config</span></code> создадим класс <code class="docutils literal"><span class="pre">DataSourceConfig</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.core.env.Environment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.datasource.DriverManagerDataSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;classpath:application.properties&quot;</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataSourceConfig</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">Environment</span> <span class="n">environment</span><span class="o">;</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">DataSource</span> <span class="nf">getDataSource</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">DriverManagerDataSource</span> <span class="n">dataSource</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DriverManagerDataSource</span><span class="o">();</span>
                <span class="n">dataSource</span><span class="o">.</span><span class="na">setDriverClassName</span><span class="o">(</span><span class="n">environment</span><span class="o">.</span><span class="na">getRequiredProperty</span><span class="o">(</span><span class="s">&quot;jdbc.driverClassName&quot;</span><span class="o">));</span>
                <span class="n">dataSource</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="n">environment</span><span class="o">.</span><span class="na">getRequiredProperty</span><span class="o">(</span><span class="s">&quot;jdbc.url&quot;</span><span class="o">));</span>
                <span class="n">dataSource</span><span class="o">.</span><span class="na">setUsername</span><span class="o">(</span><span class="n">environment</span><span class="o">.</span><span class="na">getRequiredProperty</span><span class="o">(</span><span class="s">&quot;jdbc.username&quot;</span><span class="o">));</span>
                <span class="n">dataSource</span><span class="o">.</span><span class="na">setPassword</span><span class="o">(</span><span class="n">environment</span><span class="o">.</span><span class="na">getRequiredProperty</span><span class="o">(</span><span class="s">&quot;jdbc.password&quot;</span><span class="o">));</span>
                <span class="k">return</span> <span class="n">dataSource</span><span class="o">;</span>
        <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Отлично, теперь наш сервер знает где находиться база и как к ней обратиться.
Теперь давайте наполним его задуманным функционалом, и реализуем выполнение
запросов в базу данных.</p>
</div>
<div class="section" id="id3">
<h2>Создание сущностей<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h2>
<p>Для начала нам необходимо создать сущности марки и модели автомобилей, этими данными сервер будет
обмениваться с базой. В пакете <code class="docutils literal"><span class="pre">com.scrud</span></code> создадим новый пакет <code class="docutils literal"><span class="pre">model</span></code>.
В него поместим класс <code class="docutils literal"><span class="pre">CarBrand</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.model</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.hibernate.validator.constraints.NotEmpty</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;brand&quot;</span><span class="o">)</span>
<span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;CarBrand.findAll&quot;</span><span class="o">,</span> <span class="n">query</span> <span class="o">=</span> <span class="s">&quot;select c from CarBrand c&quot;</span><span class="o">)</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrand</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
        <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span> <span class="n">GenerationType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">;</span>
        <span class="nd">@NotEmpty</span> <span class="nd">@Column</span><span class="o">(</span><span class="n">unique</span><span class="o">=</span><span class="kc">true</span><span class="o">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">false</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

        <span class="nd">@Column</span> <span class="kd">private</span> <span class="kt">short</span> <span class="n">foundedYear</span><span class="o">;</span>

        <span class="nd">@Column</span> <span class="kd">private</span> <span class="n">String</span> <span class="n">headquarter</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">CarBrand</span><span class="o">()</span> <span class="o">{}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIdBrand</span><span class="o">(</span><span class="kt">int</span> <span class="n">idBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">idBrand</span> <span class="o">=</span> <span class="n">idBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFoundedYear</span><span class="o">(</span><span class="kt">short</span> <span class="n">foundedYear</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">foundedYear</span> <span class="o">=</span> <span class="n">foundedYear</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setHeadquarter</span><span class="o">(</span><span class="n">String</span> <span class="n">headquarter</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">headquarter</span> <span class="o">=</span> <span class="n">headquarter</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getIdBrand</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">idBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">short</span> <span class="nf">getFoundedYear</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">foundedYear</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getHeadquarter</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">headquarter</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="s">&quot;CarBrand{&quot;</span> <span class="o">+</span>
                                <span class="s">&quot;idBrand=&quot;</span> <span class="o">+</span> <span class="n">idBrand</span> <span class="o">+</span>
                                <span class="s">&quot;, name=&#39;&quot;</span> <span class="o">+</span> <span class="n">name</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                                <span class="s">&quot;, foundedYear=&quot;</span> <span class="o">+</span> <span class="n">foundedYear</span> <span class="o">+</span>
                                <span class="s">&quot;, headquarter=&#39;&quot;</span> <span class="o">+</span> <span class="n">headquarter</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>И туда же поместим класс <code class="docutils literal"><span class="pre">CarModel</span></code>:</p>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.model</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.hibernate.validator.constraints.NotEmpty</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Serializable</span><span class="o">;</span>

<span class="nd">@Entity</span>
<span class="nd">@Table</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;model&quot;</span><span class="o">)</span>
<span class="nd">@NamedQuery</span><span class="o">(</span><span class="n">name</span><span class="o">=</span><span class="s">&quot;CarModel.findAll&quot;</span><span class="o">,</span> <span class="n">query</span><span class="o">=</span><span class="s">&quot;select m from CarModel m&quot;</span><span class="o">)</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModel</span> <span class="kd">implements</span> <span class="n">Serializable</span> <span class="o">{</span>
        <span class="nd">@Id</span> <span class="nd">@GeneratedValue</span><span class="o">(</span><span class="n">strategy</span><span class="o">=</span> <span class="n">GenerationType</span><span class="o">.</span><span class="na">AUTO</span><span class="o">)</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">;</span>

        <span class="nd">@Column</span><span class="o">(</span><span class="n">insertable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">updatable</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
        <span class="kd">private</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">;</span>

        <span class="nd">@ManyToOne</span>
        <span class="nd">@JoinColumn</span><span class="o">(</span><span class="n">name</span> <span class="o">=</span> <span class="s">&quot;idBrand&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">;</span>

        <span class="nd">@NotEmpty</span> <span class="nd">@Column</span>
        <span class="kd">private</span> <span class="n">String</span> <span class="n">modelName</span><span class="o">;</span>
        <span class="nd">@Column</span> <span class="kd">private</span> <span class="n">String</span> <span class="n">generation</span><span class="o">;</span>
        <span class="nd">@Column</span> <span class="kd">private</span> <span class="kt">short</span> <span class="n">productionYear</span><span class="o">;</span>
        <span class="nd">@Column</span> <span class="kd">private</span> <span class="kt">byte</span> <span class="n">doors</span><span class="o">;</span>
        <span class="nd">@Column</span> <span class="kd">private</span> <span class="kt">byte</span> <span class="n">seats</span><span class="o">;</span>
        <span class="nd">@Column</span> <span class="kd">private</span> <span class="kt">short</span> <span class="n">maximumSpeed</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">CarModel</span><span class="o">()</span> <span class="o">{}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getIdModel</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">idModel</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getIdBrand</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">idBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">getCarBrand</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getModelName</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">modelName</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">getGeneration</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">generation</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">short</span> <span class="nf">getProductionYear</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">productionYear</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">byte</span> <span class="nf">getDoors</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">doors</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">byte</span> <span class="nf">getSeats</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">seats</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">short</span> <span class="nf">getMaximumSpeed</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">maximumSpeed</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIdModel</span><span class="o">(</span><span class="kt">int</span> <span class="n">idModel</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">idModel</span> <span class="o">=</span> <span class="n">idModel</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setIdBrand</span><span class="o">(</span><span class="kt">int</span> <span class="n">idBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">idBrand</span> <span class="o">=</span> <span class="n">idBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCarBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">carBrand</span> <span class="o">=</span> <span class="n">carBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setModelName</span><span class="o">(</span><span class="n">String</span> <span class="n">modelName</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">modelName</span> <span class="o">=</span> <span class="n">modelName</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setGeneration</span><span class="o">(</span><span class="n">String</span> <span class="n">generation</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">generation</span> <span class="o">=</span> <span class="n">generation</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setProductionYear</span><span class="o">(</span><span class="kt">short</span> <span class="n">productionYear</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">productionYear</span> <span class="o">=</span> <span class="n">productionYear</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setDoors</span><span class="o">(</span><span class="kt">byte</span> <span class="n">doors</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">doors</span> <span class="o">=</span> <span class="n">doors</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSeats</span><span class="o">(</span><span class="kt">byte</span> <span class="n">seats</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">seats</span> <span class="o">=</span> <span class="n">seats</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setMaximumSpeed</span><span class="o">(</span><span class="kt">short</span> <span class="n">maximumSpeed</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">this</span><span class="o">.</span><span class="na">maximumSpeed</span> <span class="o">=</span> <span class="n">maximumSpeed</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="s">&quot;CarModel{&quot;</span> <span class="o">+</span>
                                <span class="s">&quot;idModel=&quot;</span> <span class="o">+</span> <span class="n">idModel</span> <span class="o">+</span>
                                <span class="s">&quot;, carBrand=&quot;</span> <span class="o">+</span> <span class="n">carBrand</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span>
                                <span class="s">&quot;, idBrand=&quot;</span> <span class="o">+</span> <span class="n">idBrand</span> <span class="o">+</span>
                                <span class="s">&quot;, modelName=&#39;&quot;</span> <span class="o">+</span> <span class="n">modelName</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                                <span class="s">&quot;, generation=&#39;&quot;</span> <span class="o">+</span> <span class="n">generation</span> <span class="o">+</span> <span class="sc">&#39;\&#39;&#39;</span> <span class="o">+</span>
                                <span class="s">&quot;, productionYear=&quot;</span> <span class="o">+</span> <span class="n">productionYear</span> <span class="o">+</span>
                                <span class="s">&quot;, doors=&quot;</span> <span class="o">+</span> <span class="n">doors</span> <span class="o">+</span>
                                <span class="s">&quot;, seats=&quot;</span> <span class="o">+</span> <span class="n">seats</span> <span class="o">+</span>
                                <span class="s">&quot;, maximumSpeed=&quot;</span> <span class="o">+</span> <span class="n">maximumSpeed</span> <span class="o">+</span>
                                <span class="sc">&#39;}&#39;</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>В этих классах с помощью аннотаций уже указаны необходимые запросы в базу и соответствия между полями.
Теперь необходимо задать серверу логику обработки данных трёма вариантами:</p>
<ul class="simple">
<li>Hibernate</li>
<li>JDBC</li>
<li>JPA</li>
</ul>
</div>
<div class="section" id="id4">
<h2>Настройка конфигураций запросов<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h2>
<p>В пакет <code class="docutils literal"><span class="pre">com.scrud.config</span></code> добавим 3 класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">HibernateConfig</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.hibernate.CarBrandDAOHibernateImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.hibernate.CarModelDAOHibernateImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.SessionFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.orm.hibernate4.HibernateTransactionManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.orm.hibernate4.LocalSessionFactoryBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.EnableTransactionManagement</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableTransactionManagement</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;classpath:application.properties&quot;</span><span class="o">})</span>
<span class="nd">@ComponentScan</span><span class="o">({</span><span class="s">&quot;com.scrud&quot;</span><span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HibernateConfig</span> <span class="o">{</span>

        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>

        <span class="c1">//Hibernate configuration</span>
        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">LocalSessionFactoryBean</span> <span class="nf">sessionFactory</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">LocalSessionFactoryBean</span> <span class="n">sessionFactory</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LocalSessionFactoryBean</span><span class="o">();</span>
                <span class="n">sessionFactory</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
                <span class="n">sessionFactory</span><span class="o">.</span><span class="na">setPackagesToScan</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">&quot;com.scrud.model&quot;</span> <span class="o">});</span>
                <span class="k">return</span> <span class="n">sessionFactory</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="nd">@Autowired</span>
        <span class="kd">public</span> <span class="n">HibernateTransactionManager</span> <span class="nf">hibernateTransactionManager</span><span class="o">(</span><span class="n">SessionFactory</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">HibernateTransactionManager</span> <span class="n">txManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HibernateTransactionManager</span><span class="o">();</span>
                <span class="n">txManager</span><span class="o">.</span><span class="na">setSessionFactory</span><span class="o">(</span><span class="n">s</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">txManager</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarBrandDAO</span> <span class="nf">getCarBrandHibernateDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarBrandDAOHibernateImpl</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarModelDAO</span> <span class="nf">getCarModelHibernateDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarModelDAOHibernateImpl</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">JdbcConfig</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.jdbc.CarBrandDAOJdbcImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.jdbc.CarModelDAOJdbcImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcConfig</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarBrandDAO</span> <span class="nf">getCarBrandJdbcDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarBrandDAOJdbcImpl</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarModelDAO</span> <span class="nf">getCarModelJdbcDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarModelDAOJdbcImpl</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="3">
<li><code class="docutils literal"><span class="pre">JpaConfig</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.config</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">javax.persistence.EntityManagerFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.jpa.CarBrandDAOJpaImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.jpa.CarModelDAOJpaImpl</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Bean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.PropertySource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.orm.jpa.JpaTransactionManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.PlatformTransactionManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.EnableTransactionManagement</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@PropertySource</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;classpath:application.properties&quot;</span><span class="o">})</span>
<span class="nd">@ComponentScan</span>
<span class="nd">@EnableTransactionManagement</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaConfig</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">;</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">LocalContainerEntityManagerFactoryBean</span> <span class="nf">entityManagerFactory</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">LocalContainerEntityManagerFactoryBean</span> <span class="n">entityManagerFactory</span> <span class="o">=</span>  <span class="k">new</span> <span class="n">LocalContainerEntityManagerFactoryBean</span><span class="o">();</span>

                <span class="n">entityManagerFactory</span><span class="o">.</span><span class="na">setDataSource</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
                <span class="n">entityManagerFactory</span><span class="o">.</span><span class="na">setPackagesToScan</span><span class="o">(</span><span class="k">new</span> <span class="n">String</span><span class="o">[]</span> <span class="o">{</span><span class="s">&quot;com.scrud.model&quot;</span><span class="o">});</span>
                <span class="n">HibernateJpaVendorAdapter</span> <span class="n">vendorAdapter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HibernateJpaVendorAdapter</span><span class="o">();</span>
                <span class="n">entityManagerFactory</span><span class="o">.</span><span class="na">setJpaVendorAdapter</span><span class="o">(</span><span class="n">vendorAdapter</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">entityManagerFactory</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="nd">@Autowired</span>
        <span class="kd">public</span> <span class="n">PlatformTransactionManager</span> <span class="nf">jpaTransactionManager</span><span class="o">(</span><span class="n">EntityManagerFactory</span> <span class="n">emf</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">JpaTransactionManager</span> <span class="n">txManager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JpaTransactionManager</span><span class="o">();</span>
                <span class="n">txManager</span><span class="o">.</span><span class="na">setEntityManagerFactory</span><span class="o">(</span><span class="n">emf</span><span class="o">);</span>
                <span class="k">return</span> <span class="n">txManager</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarBrandDAO</span> <span class="nf">getCarBrandJpaDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarBrandDAOJpaImpl</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Bean</span>
        <span class="kd">public</span> <span class="n">CarModelDAO</span> <span class="nf">getCarModelJpaDAO</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">CarModelDAOJpaImpl</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id5">
<h2>Настройка доступа к данными<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h2>
<p>В пакете <code class="docutils literal"><span class="pre">com.scrud</span></code> создадим новый пакет <code class="docutils literal"><span class="pre">dao</span></code>, который будет отвечать за доступ к данным.
В этом пакет поместим 2 интерфейса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandDAO</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CarBrandDAO</span><span class="o">{</span>

        <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">);</span>

        <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">();</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelDAO</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CarModelDAO</span> <span class="o">{</span>

        <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">);</span>

        <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">();</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Теперь реализуем эти интерфейсы для каждого варианта доступа. Создадим в пакете <code class="docutils literal"><span class="pre">dao</span></code> 3 новых пакета:
<code class="docutils literal"><span class="pre">hibernate</span></code>, <code class="docutils literal"><span class="pre">jdbc</span></code> и <code class="docutils literal"><span class="pre">jpa</span></code> для удобного разделения классов.</p>
<p>В пакете <code class="docutils literal"><span class="pre">hibernate</span></code> создадим классы для каждой сущности:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandDAOHibernateImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.hibernate</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Criteria</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Session</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.SessionFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandDAOHibernateImpl</span> <span class="kd">implements</span> <span class="n">CarBrandDAO</span><span class="o">{</span>

        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">SessionFactory</span> <span class="n">sessionFactory</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">Session</span> <span class="nf">getCurrentSession</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">sessionFactory</span><span class="o">.</span><span class="na">getCurrentSession</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">//update</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">merge</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">//insert</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">save</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span>

        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">carBrand</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="o">(</span><span class="n">CarBrand</span><span class="o">)</span> <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">CarBrand</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">carBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Criteria</span> <span class="n">criteria</span> <span class="o">=</span> <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">createCriteria</span><span class="o">(</span><span class="n">CarBrand</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">criteria</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelDAOHibernateImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.hibernate</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Criteria</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.Session</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.hibernate.SessionFactory</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelDAOHibernateImpl</span> <span class="kd">implements</span> <span class="n">CarModelDAO</span><span class="o">{</span>

        <span class="nd">@Autowired</span>
        <span class="kd">private</span> <span class="n">SessionFactory</span> <span class="n">sessionFactory</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">Session</span> <span class="nf">getCurrentSession</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">sessionFactory</span><span class="o">.</span><span class="na">getCurrentSession</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdModel</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">merge</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">save</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span>

        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="n">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">carModel</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                        <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">delete</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="o">(</span><span class="n">CarModel</span><span class="o">)</span> <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">get</span><span class="o">(</span><span class="n">CarModel</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">carModel</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">Criteria</span> <span class="n">criteria</span> <span class="o">=</span> <span class="n">getCurrentSession</span><span class="o">().</span><span class="na">createCriteria</span><span class="o">(</span><span class="n">CarModel</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">criteria</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Аналогично в пакете <code class="docutils literal"><span class="pre">jdbc</span></code> создадим 2 соответствующих класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandDAOJdbcImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.jdbc</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.dao.DataAccessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.ResultSetExtractor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.RowMapper</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandDAOJdbcImpl</span> <span class="kd">implements</span> <span class="n">CarBrandDAO</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>
        <span class="nd">@Autowired</span>
        <span class="kd">public</span> <span class="nf">CarBrandDAOJdbcImpl</span><span class="o">(</span><span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">jdbcTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JdbcTemplate</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// update</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;CarBrand update&quot;</span><span class="o">);</span>
                        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;UPDATE brand SET name=?, foundedYear=?, headquarter=? WHERE idBrand=?&quot;</span><span class="o">;</span>
                        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getFoundedYear</span><span class="o">(),</span><span class="n">item</span><span class="o">.</span><span class="na">getHeadquarter</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">());</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">// insert</span>
                        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;CarBrand insert&quot;</span><span class="o">);</span>
                        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;INSERT INTO brand (name, foundedYear, headquarter)&quot;</span>
                                        <span class="o">+</span> <span class="s">&quot; VALUES (?, ?, ?)&quot;</span><span class="o">;</span>
                        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getName</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getFoundedYear</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getHeadquarter</span><span class="o">());</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;DELETE FROM brand WHERE idBrand=?&quot;</span><span class="o">;</span>
                <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM brand WHERE idBrand=&quot;</span> <span class="o">+</span> <span class="n">itemId</span><span class="o">;</span>
                <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="k">new</span> <span class="n">ResultSetExtractor</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;()</span> <span class="o">{</span>

                        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">extractData</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">,</span>
                                        <span class="n">DataAccessException</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                                        <span class="k">return</span> <span class="n">getCarBrandFromDB</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
                                <span class="o">}</span>
                                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
                        <span class="o">}</span>
                <span class="o">});</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM brand&quot;</span><span class="o">;</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="k">new</span> <span class="n">RowMapper</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;()</span> <span class="o">{</span>

                        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">mapRow</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>

                                <span class="k">return</span> <span class="n">getCarBrandFromDB</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
                        <span class="o">}</span>
                <span class="o">});</span>
                <span class="k">return</span> <span class="n">listCarBrand</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="n">CarBrand</span> <span class="nf">getCarBrandFromDB</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>
                <span class="n">CarBrand</span> <span class="n">brand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarBrand</span><span class="o">();</span>
                <span class="n">brand</span><span class="o">.</span><span class="na">setIdBrand</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;idBrand&quot;</span><span class="o">));</span>
                <span class="n">brand</span><span class="o">.</span><span class="na">setName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">));</span>
                <span class="n">brand</span><span class="o">.</span><span class="na">setFoundedYear</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getShort</span><span class="o">(</span><span class="s">&quot;foundedYear&quot;</span><span class="o">));</span>
                <span class="n">brand</span><span class="o">.</span><span class="na">setHeadquarter</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;headquarter&quot;</span><span class="o">));</span>
                <span class="k">return</span> <span class="n">brand</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelDAOJdbcImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.jdbc</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.dao.DataAccessException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.JdbcTemplate</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.ResultSetExtractor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.jdbc.core.RowMapper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.sql.DataSource</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.SQLException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelDAOJdbcImpl</span> <span class="kd">implements</span> <span class="n">CarModelDAO</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarBrandJdbcDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandDAO</span> <span class="n">carBrandDAO</span><span class="o">;</span>

        <span class="kd">private</span> <span class="n">JdbcTemplate</span> <span class="n">jdbcTemplate</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">CarModelDAOJdbcImpl</span><span class="o">(</span><span class="n">DataSource</span> <span class="n">dataSource</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">jdbcTemplate</span> <span class="o">=</span> <span class="k">new</span> <span class="n">JdbcTemplate</span><span class="o">(</span><span class="n">dataSource</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdModel</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// update</span>
                        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;UPDATE model SET idBrand=?, modelName=?, generation=?, productionYear=?, doors=?, seats=?, maximumSpeed=? WHERE idModel=?&quot;</span><span class="o">;</span>
                        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getModelName</span><span class="o">(),</span><span class="n">item</span><span class="o">.</span><span class="na">getGeneration</span><span class="o">(),</span>
                                        <span class="n">item</span><span class="o">.</span><span class="na">getProductionYear</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getDoors</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getSeats</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getMaximumSpeed</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getIdModel</span><span class="o">());</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">// insert</span>
                        <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;INSERT INTO model (idBrand, modelName, generation, productionYear, doors, seats,maximumSpeed)&quot;</span>
                                        <span class="o">+</span> <span class="s">&quot; VALUES (?, ?, ?, ?, ?, ?, ?)&quot;</span><span class="o">;</span>
                        <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getModelName</span><span class="o">(),</span><span class="n">item</span><span class="o">.</span><span class="na">getGeneration</span><span class="o">(),</span>
                                        <span class="n">item</span><span class="o">.</span><span class="na">getProductionYear</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getDoors</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getSeats</span><span class="o">(),</span> <span class="n">item</span><span class="o">.</span><span class="na">getMaximumSpeed</span><span class="o">());</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;DELETE FROM model WHERE idModel=?&quot;</span><span class="o">;</span>
                <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">update</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM model WHERE idModel=&quot;</span> <span class="o">+</span> <span class="n">itemId</span><span class="o">;</span>
                <span class="k">return</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="k">new</span> <span class="n">ResultSetExtractor</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;()</span> <span class="o">{</span>

                        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">extractData</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">,</span> <span class="n">DataAccessException</span> <span class="o">{</span>
                                <span class="k">if</span> <span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
                                        <span class="k">return</span> <span class="n">getCarModelFromDB</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
                                <span class="o">}</span>
                                <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
                        <span class="o">}</span>
                <span class="o">});</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">&quot;SELECT * FROM model&quot;</span><span class="o">;</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">jdbcTemplate</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">sql</span><span class="o">,</span> <span class="k">new</span> <span class="n">RowMapper</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;()</span> <span class="o">{</span>

                        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">mapRow</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">,</span> <span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span> <span class="o">{</span>

                                <span class="k">return</span> <span class="n">getCarModelFromDB</span><span class="o">(</span><span class="n">rs</span><span class="o">);</span>
                        <span class="o">}</span>
                <span class="o">});</span>
                <span class="k">return</span> <span class="n">listCarModel</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="n">CarModel</span> <span class="nf">getCarModelFromDB</span><span class="o">(</span><span class="n">ResultSet</span> <span class="n">rs</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">SQLException</span><span class="o">{</span>
                <span class="n">CarModel</span> <span class="n">model</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarModel</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setIdModel</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;idModel&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setIdBrand</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;idBrand&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setCarBrand</span><span class="o">(</span><span class="n">carBrandDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getInt</span><span class="o">(</span><span class="s">&quot;idBrand&quot;</span><span class="o">)));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setModelName</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;modelName&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setGeneration</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">&quot;generation&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setProductionYear</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getShort</span><span class="o">(</span><span class="s">&quot;productionYear&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setDoors</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getByte</span><span class="o">(</span><span class="s">&quot;doors&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setSeats</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getByte</span><span class="o">(</span><span class="s">&quot;seats&quot;</span><span class="o">));</span>
                <span class="n">model</span><span class="o">.</span><span class="na">setMaximumSpeed</span><span class="o">(</span><span class="n">rs</span><span class="o">.</span><span class="na">getShort</span><span class="o">(</span><span class="s">&quot;maximumSpeed&quot;</span><span class="o">));</span>
                <span class="k">return</span> <span class="n">model</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Также и в пакете <code class="docutils literal"><span class="pre">jpa</span></code> создадим 2 класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandDAOJpaImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.jpa</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.EntityManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.PersistenceContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandDAOJpaImpl</span> <span class="kd">implements</span> <span class="n">CarBrandDAO</span> <span class="o">{</span>
        <span class="nd">@PersistenceContext</span>
        <span class="kd">private</span> <span class="n">EntityManager</span> <span class="n">em</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">//update</span>
                        <span class="n">em</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">//insert</span>
                        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">em</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">));</span>

        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">CarBrand</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">carBrands</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">&quot;CarBrand.findAll&quot;</span><span class="o">,</span><span class="n">CarBrand</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">carBrands</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelDAOJpaImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.dao.jpa</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Repository</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.EntityManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.persistence.PersistenceContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Repository</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelDAOJpaImpl</span> <span class="kd">implements</span> <span class="n">CarModelDAO</span> <span class="o">{</span>
        <span class="nd">@PersistenceContext</span>
        <span class="kd">private</span> <span class="n">EntityManager</span> <span class="n">em</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
                        <span class="c1">// update</span>
                        <span class="n">em</span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                        <span class="c1">// insert</span>
                        <span class="n">em</span><span class="o">.</span><span class="na">persist</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">em</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">));</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">em</span><span class="o">.</span><span class="na">find</span><span class="o">(</span><span class="n">CarModel</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">carModels</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="na">createNamedQuery</span><span class="o">(</span><span class="s">&quot;CarModel.findAll&quot;</span><span class="o">,</span><span class="n">CarModel</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">getResultList</span><span class="o">();</span>
                <span class="k">return</span> <span class="n">carModels</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id6">
<h2>Создание сервисов<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h2>
<p>В пакете <code class="docutils literal"><span class="pre">com.scrud</span></code> создадим новый пакет <code class="docutils literal"><span class="pre">service</span></code>, который будет содержать сервисы каждого варианта
осуществления запросов. Как и в случае с классами доступа к данным, сначала создадим интерфесы и потом
их реализацию для hibernate, jdbc и jpa.</p>
<p>В пакет <code class="docutils literal"><span class="pre">service</span></code> создадим интерфейсы сервисов, соответствующих ранее созданным сущностям:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandService</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CarBrandService</span> <span class="o">{</span>

        <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">);</span>

        <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelService</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">CarModelService</span> <span class="o">{</span>
        <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">);</span>

        <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Теперь реализуем интерфесы для hibernate. Создадим в пакете <code class="docutils literal"><span class="pre">service</span></code> 2 класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandHibernateServiceImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carBrandHibernateService&quot;</span><span class="o">)</span>
<span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;hibernateTransactionManager&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandHibernateServiceImpl</span> <span class="kd">implements</span> <span class="n">CarBrandService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarBrandHibernateDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandDAO</span> <span class="n">carBrandDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelHibernateServiceImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carModelHibernateService&quot;</span><span class="o">)</span>
<span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;hibernateTransactionManager&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelHibernateServiceImpl</span> <span class="kd">implements</span> <span class="n">CarModelService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarModelHibernateDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelDAO</span> <span class="n">carModelDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Для jdbc повторим аналогичную процедуру, создав в том же пакете классы:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandJdbcServiceImpl</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carBrandJdbcService&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandJdbcServiceImpl</span> <span class="kd">implements</span> <span class="n">CarBrandService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarBrandJdbcDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandDAO</span> <span class="n">carBrandDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelJdbcService</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carModelJdbcService&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelJdbcServiceImpl</span> <span class="kd">implements</span> <span class="n">CarModelService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarModelJdbcDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelDAO</span> <span class="n">carModelDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Ну и для jpa также в пакете <code class="docutils literal"><span class="pre">service</span></code> создадим 2 новых класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">CarBrandJpaService</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarBrandDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carBrandJpaService&quot;</span><span class="o">)</span>
<span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;jpaTransactionManager&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarBrandJpaServiceImpl</span> <span class="kd">implements</span> <span class="n">CarBrandService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarBrandJpaDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandDAO</span> <span class="n">carBrandDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarBrand</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">CarModelJpaService</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.service</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.dao.CarModelDAO</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Service</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.transaction.annotation.Transactional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Service</span><span class="o">(</span><span class="s">&quot;carModelJpaService&quot;</span><span class="o">)</span>
<span class="nd">@Transactional</span><span class="o">(</span><span class="n">readOnly</span><span class="o">=</span><span class="kc">false</span><span class="o">,</span> <span class="n">value</span> <span class="o">=</span> <span class="s">&quot;jpaTransactionManager&quot;</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">CarModelJpaServiceImpl</span> <span class="kd">implements</span> <span class="n">CarModelService</span> <span class="o">{</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;getCarModelJpaDAO&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelDAO</span> <span class="n">carModelDAO</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">saveOrUpdate</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">delete</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelDAO</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">CarModel</span> <span class="nf">get</span><span class="o">(</span><span class="kt">int</span> <span class="n">itemId</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">itemId</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="nf">list</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">carModelDAO</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Как видите, все сервисы очень похожи, но мы специально разделили их в разные классы для наглядной
демонстрации трех различных вариантов реализации.</p>
</div>
<div class="section" id="id7">
<h2>Вывод данных в файл<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h2>
<p>Нам необходимо реализовать вывод данных в файл PDF и Excel форматов.</p>
<p>В директории <strong>main</strong> -&gt; <strong>resources</strong> создадим файл <code class="docutils literal"><span class="pre">view.properties</span></code> и запишем в него
конфигурацию классов формирования файлов:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pdfView</span><span class="o">.</span><span class="p">(</span><span class="n">class</span><span class="p">)</span><span class="o">=</span><span class="n">com</span><span class="o">.</span><span class="n">scrud</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">PDFBuilder</span>
<span class="n">excelView</span><span class="o">.</span><span class="p">(</span><span class="n">class</span><span class="p">)</span><span class="o">=</span><span class="n">com</span><span class="o">.</span><span class="n">scrud</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">ExcelBuilder</span>
</pre></div>
</div>
<p>Далее в пакете <code class="docutils literal"><span class="pre">com.scrud</span></code> создадим новый пакет <code class="docutils literal"><span class="pre">view</span></code> и поместим в него следующие классы:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">AbstractTextPdfView</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.view</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.io.ByteArrayOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.OutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Date</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.ColumnText</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.PdfPageEventHelper</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.view.AbstractView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.PdfWriter</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractITextPdfView</span> <span class="kd">extends</span> <span class="n">AbstractView</span> <span class="o">{</span>

        <span class="kd">public</span> <span class="nf">AbstractITextPdfView</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setContentType</span><span class="o">(</span><span class="s">&quot;application/pdf&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">generatesDownloadContent</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">renderMergedOutputModel</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span>
                        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="c1">// IE workaround: write into byte array first.</span>
                <span class="n">ByteArrayOutputStream</span> <span class="n">baos</span> <span class="o">=</span> <span class="n">createTemporaryOutputStream</span><span class="o">();</span>

                <span class="c1">// Apply preferences and build metadata.</span>
                <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">newDocument</span><span class="o">();</span>
                <span class="n">PdfWriter</span> <span class="n">writer</span> <span class="o">=</span> <span class="n">newWriter</span><span class="o">(</span><span class="n">document</span><span class="o">,</span> <span class="n">baos</span><span class="o">);</span>
                <span class="n">prepareWriter</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">writer</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>
                <span class="n">buildPdfMetadata</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">document</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span>

                <span class="c1">// Build PDF document.</span>
                <span class="n">document</span><span class="o">.</span><span class="na">open</span><span class="o">();</span>
                <span class="n">addMetaData</span><span class="o">(</span><span class="n">document</span><span class="o">);</span>
                <span class="n">buildPdfDocument</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">document</span><span class="o">,</span> <span class="n">writer</span><span class="o">,</span> <span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

                <span class="c1">// Flush to HTTP response.</span>
                <span class="n">writeToResponse</span><span class="o">(</span><span class="n">response</span><span class="o">,</span> <span class="n">baos</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">addMetaData</span><span class="o">(</span><span class="n">Document</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>

        <span class="o">}</span>

        <span class="kd">protected</span> <span class="n">Document</span> <span class="nf">newDocument</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">Document</span><span class="o">(</span><span class="n">PageSize</span><span class="o">.</span><span class="na">A4</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="n">PdfWriter</span> <span class="nf">newWriter</span><span class="o">(</span><span class="n">Document</span> <span class="n">document</span><span class="o">,</span> <span class="n">OutputStream</span> <span class="n">os</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">DocumentException</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">PdfWriter</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">document</span><span class="o">,</span> <span class="n">os</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">prepareWriter</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">PdfWriter</span> <span class="n">writer</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">DocumentException</span> <span class="o">{</span>

                <span class="n">FooterPageEvent</span> <span class="n">event</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FooterPageEvent</span><span class="o">();</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">setPageEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
                <span class="n">writer</span><span class="o">.</span><span class="na">setViewerPreferences</span><span class="o">(</span><span class="n">getViewerPreferences</span><span class="o">());</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="kt">int</span> <span class="nf">getViewerPreferences</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="n">PdfWriter</span><span class="o">.</span><span class="na">ALLOW_PRINTING</span> <span class="o">|</span> <span class="n">PdfWriter</span><span class="o">.</span><span class="na">PageLayoutSinglePage</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">buildPdfMetadata</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">Document</span> <span class="n">document</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">document</span><span class="o">.</span><span class="na">addTitle</span><span class="o">(</span><span class="s">&quot;Car_report&quot;</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">addSubject</span><span class="o">(</span><span class="s">&quot;Using iText with Spring&quot;</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">addKeywords</span><span class="o">(</span><span class="s">&quot;Java, PDF, iText&quot;</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">addAuthor</span><span class="o">(</span><span class="s">&quot;mchukd@gmail.com&quot;</span><span class="o">);</span>
                <span class="n">document</span><span class="o">.</span><span class="na">addCreator</span><span class="o">(</span><span class="s">&quot;mchukd@gmail.com&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">buildPdfDocument</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">Document</span> <span class="n">document</span><span class="o">,</span> <span class="n">PdfWriter</span> <span class="n">writer</span><span class="o">,</span>
                        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>

        <span class="kd">public</span> <span class="kd">class</span> <span class="nc">FooterPageEvent</span> <span class="kd">extends</span> <span class="n">PdfPageEventHelper</span> <span class="o">{</span>

                <span class="kd">private</span> <span class="n">Font</span> <span class="n">font</span> <span class="o">=</span> <span class="n">FontFactory</span><span class="o">.</span><span class="na">getFont</span><span class="o">(</span><span class="n">FontFactory</span><span class="o">.</span><span class="na">COURIER</span><span class="o">);</span>

                <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onEndPage</span><span class="o">(</span><span class="n">PdfWriter</span> <span class="n">writer</span><span class="o">,</span> <span class="n">Document</span> <span class="n">document</span><span class="o">)</span> <span class="o">{</span>

                        <span class="n">SimpleDateFormat</span> <span class="n">formatter</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="s">&quot;dd.MM.yyyy &#39;at&#39; HH:mm:ss&quot;</span><span class="o">);</span>
                        <span class="n">String</span> <span class="n">today</span> <span class="o">=</span> <span class="n">formatter</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="k">new</span> <span class="n">Date</span><span class="o">());</span>

                        <span class="n">ColumnText</span><span class="o">.</span><span class="na">showTextAligned</span><span class="o">(</span><span class="n">writer</span><span class="o">.</span><span class="na">getDirectContent</span><span class="o">(),</span> <span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">,</span> <span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;generated: &quot;</span><span class="o">+</span><span class="n">today</span><span class="o">,</span> <span class="n">font</span><span class="o">),</span> <span class="mi">290</span><span class="o">,</span> <span class="mi">40</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">AbstractPOIExcelView</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.view</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.apache.poi.POIXMLProperties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.poi.xssf.usermodel.XSSFWorkbook</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.view.AbstractView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.ServletOutputStream</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractPOIExcelView</span> <span class="kd">extends</span> <span class="n">AbstractView</span><span class="o">{</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">CONTENT_TYPE_XLSX</span> <span class="o">=</span> <span class="s">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">AbstractPOIExcelView</span><span class="o">()</span> <span class="o">{</span>
                <span class="n">setContentType</span><span class="o">(</span><span class="n">CONTENT_TYPE_XLSX</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">boolean</span> <span class="nf">generatesDownloadContent</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kd">final</span> <span class="kt">void</span> <span class="nf">renderMergedOutputModel</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
                                                                                                <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

                <span class="n">XSSFWorkbook</span> <span class="n">workbook</span> <span class="o">=</span> <span class="n">createWorkbook</span><span class="o">();</span>
                <span class="n">buildXlsxMetadata</span><span class="o">(</span><span class="n">workbook</span><span class="o">);</span>
                <span class="n">buildExcelDocument</span><span class="o">(</span><span class="n">model</span><span class="o">,</span> <span class="n">workbook</span><span class="o">,</span> <span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
                <span class="c1">// Set the content type.</span>
                <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="n">getContentType</span><span class="o">());</span>

                <span class="c1">// Flush byte array to servlet output stream.</span>
                <span class="n">ServletOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">();</span>
                <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
                <span class="n">workbook</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
                <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">buildXlsxMetadata</span><span class="o">(</span><span class="n">XSSFWorkbook</span> <span class="n">workbook</span><span class="o">){</span>
                <span class="n">POIXMLProperties</span> <span class="n">props</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">getProperties</span><span class="o">();</span>

                <span class="n">POIXMLProperties</span><span class="o">.</span><span class="na">CoreProperties</span> <span class="n">coreProp</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="na">getCoreProperties</span><span class="o">();</span>
                <span class="n">coreProp</span><span class="o">.</span><span class="na">setCreator</span><span class="o">(</span><span class="s">&quot;mchukd@gmail.com&quot;</span><span class="o">);</span>
                <span class="n">coreProp</span><span class="o">.</span><span class="na">setDescription</span><span class="o">(</span><span class="s">&quot;creating xlsx report using Apache POI / Java&quot;</span><span class="o">);</span>
                <span class="n">coreProp</span><span class="o">.</span><span class="na">setKeywords</span><span class="o">(</span><span class="s">&quot;Apache POI, Java, Spring, XLSX &quot;</span><span class="o">);</span>
                <span class="n">coreProp</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;Cars_report&quot;</span><span class="o">);</span>
                <span class="n">coreProp</span><span class="o">.</span><span class="na">setCategory</span><span class="o">(</span><span class="s">&quot;Programming&quot;</span><span class="o">);</span>

                <span class="n">POIXMLProperties</span><span class="o">.</span><span class="na">ExtendedProperties</span> <span class="n">extProp</span><span class="o">=</span><span class="n">props</span><span class="o">.</span><span class="na">getExtendedProperties</span><span class="o">();</span>
                <span class="n">extProp</span><span class="o">.</span><span class="na">getUnderlyingProperties</span><span class="o">().</span><span class="na">setCompany</span><span class="o">(</span><span class="s">&quot;knit-12-1&quot;</span><span class="o">);</span>
                <span class="n">extProp</span><span class="o">.</span><span class="na">getUnderlyingProperties</span><span class="o">().</span><span class="na">setManager</span><span class="o">(</span><span class="s">&quot;mk_d&quot;</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">protected</span> <span class="kd">abstract</span> <span class="n">XSSFWorkbook</span> <span class="nf">createWorkbook</span><span class="o">();</span>

        <span class="kd">protected</span> <span class="kd">abstract</span> <span class="kt">void</span> <span class="nf">buildExcelDocument</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">XSSFWorkbook</span> <span class="n">workbook</span><span class="o">,</span>
                                                                                        <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span><span class="o">;</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="3">
<li><code class="docutils literal"><span class="pre">ExcelBuilder</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.view</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.poi.hssf.usermodel.HSSFFont</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.poi.hssf.util.HSSFColor</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.poi.ss.usermodel.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.poi.xssf.usermodel.XSSFWorkbook</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">ExcelBuilder</span> <span class="kd">extends</span> <span class="n">AbstractPOIExcelView</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="n">XSSFWorkbook</span> <span class="nf">createWorkbook</span><span class="o">()</span> <span class="o">{</span>
                <span class="k">return</span> <span class="k">new</span> <span class="n">XSSFWorkbook</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">buildExcelDocument</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">XSSFWorkbook</span> <span class="n">workbook</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
                <span class="c1">// get data model which is passed by the Spring container</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">carBrands</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;)</span> <span class="n">model</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;carBrands&quot;</span><span class="o">);</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">carModels</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;)</span> <span class="n">model</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;carModels&quot;</span><span class="o">);</span>

                <span class="n">generateBrandSheet</span><span class="o">(</span><span class="n">workbook</span><span class="o">,</span> <span class="n">carBrands</span><span class="o">);</span>
                <span class="n">generateModelsSheet</span><span class="o">(</span><span class="n">workbook</span><span class="o">,</span> <span class="n">carModels</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">generateBrandSheet</span><span class="o">(</span><span class="n">XSSFWorkbook</span> <span class="n">workbook</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">carBrands</span><span class="o">){</span>

                <span class="c1">// create a new Excel sheet</span>
                <span class="n">Sheet</span> <span class="n">sheet</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createSheet</span><span class="o">(</span><span class="s">&quot;Brands&quot;</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">5000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">3000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">10000</span><span class="o">);</span>

                <span class="n">Font</span> <span class="n">font</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createFont</span><span class="o">();</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setBoldweight</span><span class="o">(</span><span class="n">HSSFFont</span><span class="o">.</span><span class="na">BOLDWEIGHT_BOLD</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">HSSFColor</span><span class="o">.</span><span class="na">WHITE</span><span class="o">.</span><span class="na">index</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setFontName</span><span class="o">(</span><span class="s">&quot;Helvetica&quot;</span><span class="o">);</span>

                <span class="n">CellStyle</span> <span class="n">headerStyle</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createCellStyle</span><span class="o">();</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFillForegroundColor</span><span class="o">(</span><span class="n">HSSFColor</span><span class="o">.</span><span class="na">GREY_40_PERCENT</span><span class="o">.</span><span class="na">index</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFillPattern</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">SOLID_FOREGROUND</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="n">font</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>

                <span class="c1">// create header row</span>
                <span class="n">Row</span> <span class="n">headerRow</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="na">createRow</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;№&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Brand name&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Founded year&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Headquarter&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">CellStyle</span> <span class="n">rowCellStyle</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createCellStyle</span><span class="o">();</span>
                <span class="n">rowCellStyle</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>
                <span class="c1">// create data rows</span>
                <span class="kt">int</span> <span class="n">rowCount</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">:</span> <span class="n">carBrands</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Row</span> <span class="n">row</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="na">createRow</span><span class="o">(</span><span class="n">rowCount</span><span class="o">++);</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">rowCount</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carBrand</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carBrand</span><span class="o">.</span><span class="na">getFoundedYear</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carBrand</span><span class="o">.</span><span class="na">getHeadquarter</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="kt">void</span> <span class="nf">generateModelsSheet</span><span class="o">(</span><span class="n">XSSFWorkbook</span> <span class="n">workbook</span><span class="o">,</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">carModels</span><span class="o">){</span>

                <span class="c1">// create a new Excel sheet</span>
                <span class="n">Sheet</span> <span class="n">sheet</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createSheet</span><span class="o">(</span><span class="s">&quot;Models&quot;</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">2000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="mi">5000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="mi">5000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span><span class="mi">7000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="mi">2500</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="mi">2000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span><span class="mi">2000</span><span class="o">);</span>
                <span class="n">sheet</span><span class="o">.</span><span class="na">setColumnWidth</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span><span class="mi">2500</span><span class="o">);</span>

                <span class="n">Font</span> <span class="n">font</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createFont</span><span class="o">();</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setBoldweight</span><span class="o">(</span><span class="n">HSSFFont</span><span class="o">.</span><span class="na">BOLDWEIGHT_BOLD</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">HSSFColor</span><span class="o">.</span><span class="na">WHITE</span><span class="o">.</span><span class="na">index</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setFontName</span><span class="o">(</span><span class="s">&quot;Helvetica&quot;</span><span class="o">);</span>

                <span class="n">CellStyle</span> <span class="n">headerStyle</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createCellStyle</span><span class="o">();</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFillForegroundColor</span><span class="o">(</span><span class="n">HSSFColor</span><span class="o">.</span><span class="na">GREY_40_PERCENT</span><span class="o">.</span><span class="na">index</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFillPattern</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">SOLID_FOREGROUND</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setFont</span><span class="o">(</span><span class="n">font</span><span class="o">);</span>
                <span class="n">headerStyle</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>

                <span class="c1">// create header row</span>
                <span class="n">Row</span> <span class="n">headerRow</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="na">createRow</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;№&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Brand&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Model&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Generation&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">4</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Prod year&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">4</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Doors&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">6</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Seats&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">6</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">headerRow</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">7</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="s">&quot;Max speed&quot;</span><span class="o">);</span>
                <span class="n">headerRow</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">7</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">headerStyle</span><span class="o">);</span>

                <span class="n">CellStyle</span> <span class="n">rowCellStyle</span> <span class="o">=</span> <span class="n">workbook</span><span class="o">.</span><span class="na">createCellStyle</span><span class="o">();</span>
                <span class="n">rowCellStyle</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">CellStyle</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>
                <span class="c1">// create data rows</span>
                <span class="kt">int</span> <span class="n">rowCount</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">:</span> <span class="n">carModels</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">Row</span> <span class="n">row</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="na">createRow</span><span class="o">(</span><span class="n">rowCount</span><span class="o">++);</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">rowCount</span><span class="o">-</span><span class="mi">1</span><span class="o">);</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getCarBrand</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getModelName</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">2</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getGeneration</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">4</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getProductionYear</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">4</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getDoors</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">5</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">6</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getSeats</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">6</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>

                        <span class="n">row</span><span class="o">.</span><span class="na">createCell</span><span class="o">(</span><span class="mi">7</span><span class="o">).</span><span class="na">setCellValue</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getMaximumSpeed</span><span class="o">());</span>
                        <span class="n">row</span><span class="o">.</span><span class="na">getCell</span><span class="o">(</span><span class="mi">7</span><span class="o">).</span><span class="na">setCellStyle</span><span class="o">(</span><span class="n">rowCellStyle</span><span class="o">);</span>
                <span class="o">}</span>
        <span class="o">}</span>

<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="4">
<li><code class="docutils literal"><span class="pre">PDFBuilder</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.view</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Map</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletRequest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.servlet.http.HttpServletResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.PdfPCell</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.PdfPTable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.itextpdf.text.pdf.PdfWriter</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PDFBuilder</span> <span class="kd">extends</span> <span class="n">AbstractITextPdfView</span> <span class="o">{</span>

        <span class="nd">@Override</span>
        <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">buildPdfDocument</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Object</span><span class="o">&gt;</span> <span class="n">model</span><span class="o">,</span> <span class="n">Document</span> <span class="n">doc</span><span class="o">,</span>
                                                                        <span class="n">PdfWriter</span> <span class="n">writer</span><span class="o">,</span> <span class="n">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span>
                                                                        <span class="n">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span><span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

                <span class="c1">// get data model which is passed by the Spring container</span>
                <span class="n">Font</span> <span class="n">paragraphFont</span> <span class="o">=</span> <span class="n">FontFactory</span><span class="o">.</span><span class="na">getFont</span><span class="o">(</span><span class="n">FontFactory</span><span class="o">.</span><span class="na">HELVETICA_BOLD</span><span class="o">);</span>
                <span class="n">paragraphFont</span><span class="o">.</span><span class="na">setSize</span><span class="o">(</span><span class="mi">14</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">carBrands</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;)</span> <span class="n">model</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;carBrands&quot;</span><span class="o">);</span>
                <span class="n">Paragraph</span> <span class="n">brandParagraph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Paragraph</span><span class="o">(</span><span class="s">&quot;Car brands&quot;</span><span class="o">,</span><span class="n">paragraphFont</span><span class="o">);</span>
                <span class="n">brandParagraph</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>
                <span class="n">doc</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">brandParagraph</span><span class="o">);</span>
                <span class="n">PdfPTable</span> <span class="n">carBrandsTable</span> <span class="o">=</span> <span class="n">getCarBrandTable</span><span class="o">(</span><span class="n">carBrands</span><span class="o">);</span>
                <span class="n">doc</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">carBrandsTable</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">carModels</span> <span class="o">=</span> <span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;)</span> <span class="n">model</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;carModels&quot;</span><span class="o">);</span>
                <span class="n">Paragraph</span> <span class="n">modelParagraph</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Paragraph</span><span class="o">(</span><span class="s">&quot;Car models&quot;</span><span class="o">,</span><span class="n">paragraphFont</span><span class="o">);</span>
                <span class="n">modelParagraph</span><span class="o">.</span><span class="na">setAlignment</span><span class="o">(</span><span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>
                <span class="n">doc</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">modelParagraph</span><span class="o">);</span>
                <span class="n">PdfPTable</span> <span class="n">carModelsTable</span> <span class="o">=</span> <span class="n">getCarModelTable</span><span class="o">(</span><span class="n">carModels</span><span class="o">);</span>
                <span class="n">doc</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">carModelsTable</span><span class="o">);</span>
        <span class="o">}</span>


        <span class="kd">private</span> <span class="n">PdfPTable</span> <span class="nf">getCarBrandTable</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">carBrands</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

                <span class="n">PdfPTable</span> <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PdfPTable</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setWidthPercentage</span><span class="o">(</span><span class="mf">100.0f</span><span class="o">);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setWidths</span><span class="o">(</span><span class="k">new</span> <span class="kt">float</span><span class="o">[]{</span><span class="mf">0.4f</span><span class="o">,</span> <span class="mf">2.0f</span><span class="o">,</span> <span class="mf">1.0f</span><span class="o">,</span> <span class="mf">4.0f</span><span class="o">});</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setSpacingBefore</span><span class="o">(</span><span class="mi">10</span><span class="o">);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setHorizontalAlignment</span><span class="o">(</span><span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_RIGHT</span><span class="o">);</span>
                <span class="c1">// define font for table header row</span>
                <span class="n">Font</span> <span class="n">font</span> <span class="o">=</span> <span class="n">FontFactory</span><span class="o">.</span><span class="na">getFont</span><span class="o">(</span><span class="n">FontFactory</span><span class="o">.</span><span class="na">HELVETICA</span><span class="o">,</span> <span class="s">&quot;ISO-8859-5&quot;</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">BaseColor</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>

                <span class="c1">// define table header cell</span>
                <span class="n">PdfPCell</span> <span class="n">cell</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PdfPCell</span><span class="o">();</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setBackgroundColor</span><span class="o">(</span><span class="n">BaseColor</span><span class="o">.</span><span class="na">GRAY</span><span class="o">);</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setPadding</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setHorizontalAlignment</span><span class="o">(</span><span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>

                <span class="c1">// write table header</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;#&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Brand name&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Founded year&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Headquarter&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="c1">// write table row data</span>
                <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">:</span> <span class="n">carBrands</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">index</span><span class="o">);</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">carBrand</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">carBrand</span><span class="o">.</span><span class="na">getFoundedYear</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">carBrand</span><span class="o">.</span><span class="na">getHeadquarter</span><span class="o">());</span>
                        <span class="n">index</span><span class="o">++;</span>
                <span class="o">}</span>
                <span class="k">return</span> <span class="n">table</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">private</span> <span class="n">PdfPTable</span> <span class="nf">getCarModelTable</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">carModels</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>

                <span class="n">PdfPTable</span> <span class="n">table</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PdfPTable</span><span class="o">(</span><span class="mi">8</span><span class="o">);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setWidthPercentage</span><span class="o">(</span><span class="mf">100.0f</span><span class="o">);</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setWidths</span><span class="o">(</span><span class="k">new</span> <span class="kt">float</span><span class="o">[]{</span><span class="mf">0.4f</span><span class="o">,</span> <span class="mf">1.5f</span><span class="o">,</span> <span class="mf">1.5f</span><span class="o">,</span> <span class="mf">2.0f</span><span class="o">,</span> <span class="mf">0.7f</span><span class="o">,</span> <span class="mf">0.7f</span><span class="o">,</span> <span class="mf">0.7f</span><span class="o">,</span> <span class="mf">0.7f</span><span class="o">});</span>
                <span class="n">table</span><span class="o">.</span><span class="na">setSpacingBefore</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>

                <span class="c1">// define font for table header row</span>
                <span class="n">Font</span> <span class="n">font</span> <span class="o">=</span> <span class="n">FontFactory</span><span class="o">.</span><span class="na">getFont</span><span class="o">(</span><span class="n">FontFactory</span><span class="o">.</span><span class="na">HELVETICA</span><span class="o">,</span> <span class="s">&quot;ISO-8859-5&quot;</span><span class="o">);</span>
                <span class="n">font</span><span class="o">.</span><span class="na">setColor</span><span class="o">(</span><span class="n">BaseColor</span><span class="o">.</span><span class="na">WHITE</span><span class="o">);</span>

                <span class="c1">// define table header cell</span>
                <span class="n">PdfPCell</span> <span class="n">cell</span> <span class="o">=</span> <span class="k">new</span> <span class="n">PdfPCell</span><span class="o">();</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setBackgroundColor</span><span class="o">(</span><span class="n">BaseColor</span><span class="o">.</span><span class="na">GRAY</span><span class="o">);</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setPadding</span><span class="o">(</span><span class="mi">5</span><span class="o">);</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setHorizontalAlignment</span><span class="o">(</span><span class="n">Element</span><span class="o">.</span><span class="na">ALIGN_CENTER</span><span class="o">);</span>

                <span class="c1">// write table header</span>
                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;#&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Brand&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Model&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Generation&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Prod year&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Doors&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Seats&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="n">cell</span><span class="o">.</span><span class="na">setPhrase</span><span class="o">(</span><span class="k">new</span> <span class="n">Phrase</span><span class="o">(</span><span class="s">&quot;Max speed&quot;</span><span class="o">,</span> <span class="n">font</span><span class="o">));</span>
                <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">cell</span><span class="o">);</span>

                <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
                <span class="c1">// write table row data</span>
                <span class="k">for</span> <span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">:</span> <span class="n">carModels</span><span class="o">)</span> <span class="o">{</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">index</span><span class="o">);</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getCarBrand</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getModelName</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="n">carModel</span><span class="o">.</span><span class="na">getGeneration</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getProductionYear</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getDoors</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getSeats</span><span class="o">());</span>
                        <span class="n">table</span><span class="o">.</span><span class="na">addCell</span><span class="o">(</span><span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getMaximumSpeed</span><span class="o">());</span>
                        <span class="n">index</span><span class="o">++;</span>
                <span class="o">}</span>
                <span class="k">return</span> <span class="n">table</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="id8">
<h2>Создание контроллеров<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h2>
<p>Теперь для hibernate, jdbc и  jpa создадим контроллеры, которые будут исопльзовать добавленные ранее сервисы
а также вывод данных файл.Для этого в пакете <code class="docutils literal"><span class="pre">controllers</span></code> создадим 3 новых класса:</p>
<ol class="arabic simple">
<li><code class="docutils literal"><span class="pre">HibernateController</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarBrandService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarModelService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.ModelMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.ModelAndView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">HibernateController</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INSTRUMENT</span> <span class="o">=</span> <span class="s">&quot;hibernate&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TITLE</span> <span class="o">=</span> <span class="s">&quot;Hibernate&quot;</span><span class="o">;</span>

        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carBrandHibernateService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandService</span> <span class="n">carBrandService</span><span class="o">;</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carModelHibernateService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelService</span> <span class="n">carModelService</span><span class="o">;</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">printJdbc</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;instrument&quot;</span><span class="o">,</span> <span class="n">INSTRUMENT</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarModel&quot;</span><span class="o">,</span><span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span><span class="n">listCarBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;content&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarBrand entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addBrand</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarBrand</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;edit&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarModel entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addModel</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarModel</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>

                <span class="kt">int</span> <span class="n">idBrand</span> <span class="o">=</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">();</span>
                <span class="n">carModel</span><span class="o">.</span><span class="na">setCarBrand</span><span class="o">(</span><span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">));</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editModel</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>

                <span class="kt">int</span> <span class="n">idBrand</span> <span class="o">=</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">();</span>
                <span class="n">carModel</span><span class="o">.</span><span class="na">setCarBrand</span><span class="o">(</span><span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">));</span>

                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/pdfReport&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/xlsxReport.xlsx&quot;</span><span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">downloadReport</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">&quot;view&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="c1">// return a view which will be resolved by an ResourceBundleViewResolver</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carBrands&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carModels&quot;</span><span class="o">,</span> <span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="2">
<li><code class="docutils literal"><span class="pre">JdbcController</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarBrandService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarModelService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.ModelMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.ModelAndView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JdbcController</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INSTRUMENT</span> <span class="o">=</span> <span class="s">&quot;jdbc&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TITLE</span> <span class="o">=</span> <span class="s">&quot;JDBC&quot;</span><span class="o">;</span>

        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carBrandJdbcService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandService</span> <span class="n">carBrandService</span><span class="o">;</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carModelJdbcService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelService</span> <span class="n">carModelService</span><span class="o">;</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">printJdbc</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;instrument&quot;</span><span class="o">,</span> <span class="n">INSTRUMENT</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarModel&quot;</span><span class="o">,</span><span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span><span class="n">listCarBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;content&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarBrand entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addBrand</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarBrand</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarModel entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addModel</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarModel</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editModel</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/pdfReport&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/xlsxReport.xlsx&quot;</span><span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">downloadReport</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">&quot;view&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="c1">// return a view which will be resolved by an ResourceBundleViewResolver</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carBrands&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carModels&quot;</span><span class="o">,</span> <span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="3">
<li><code class="docutils literal"><span class="pre">JpaController</span></code>:</li>
</ol>
<div class="highlight-java"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="kn">package</span> <span class="nn">com.scrud.controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.scrud.model.CarBrand</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.model.CarModel</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarBrandService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.scrud.service.CarModelService</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Autowired</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.beans.factory.annotation.Qualifier</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.stereotype.Controller</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.ui.ModelMap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.PathVariable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.servlet.ModelAndView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="nd">@Controller</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JpaController</span> <span class="o">{</span>

        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">INSTRUMENT</span> <span class="o">=</span> <span class="s">&quot;jpa&quot;</span><span class="o">;</span>
        <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">TITLE</span> <span class="o">=</span> <span class="s">&quot;JPA&quot;</span><span class="o">;</span>

        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carBrandJpaService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarBrandService</span> <span class="n">carBrandService</span><span class="o">;</span>
        <span class="nd">@Autowired</span>
        <span class="nd">@Qualifier</span><span class="o">(</span><span class="s">&quot;carModelJpaService&quot;</span><span class="o">)</span>
        <span class="kd">private</span> <span class="n">CarModelService</span> <span class="n">carModelService</span><span class="o">;</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">printJdbc</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;instrument&quot;</span><span class="o">,</span> <span class="n">INSTRUMENT</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarModel&quot;</span><span class="o">,</span><span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span><span class="n">listCarBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;content&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarBrand entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addBrand</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarBrand</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newBrand&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>

                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editBrand</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idBrand</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarBrand</span> <span class="n">carBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carBrand&quot;</span><span class="o">,</span> <span class="n">carBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;edit&quot;</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;brandForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-brand/{idBrand}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateBrand</span><span class="o">(</span><span class="n">CarBrand</span> <span class="n">carBrand</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carBrandService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carBrand</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="c1">//CRUD oparations with CarModel entity</span>
        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">addModel</span><span class="o">(</span><span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Add new&quot;</span><span class="o">);</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CarModel</span><span class="o">();</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/newModel&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">saveModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>

                <span class="kt">int</span> <span class="n">idBrand</span> <span class="o">=</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">();</span>
                <span class="n">carModel</span><span class="o">.</span><span class="na">setCarBrand</span><span class="o">(</span><span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">));</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/delete-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">deleteUser</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">carModelService</span><span class="o">.</span><span class="na">delete</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">editModel</span><span class="o">(</span><span class="nd">@PathVariable</span> <span class="kt">int</span> <span class="n">idModel</span><span class="o">,</span> <span class="n">ModelMap</span> <span class="n">model</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;title&quot;</span><span class="o">,</span> <span class="n">TITLE</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;action&quot;</span><span class="o">,</span> <span class="s">&quot;Edit&quot;</span><span class="o">);</span>

                <span class="n">CarModel</span> <span class="n">carModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idModel</span><span class="o">);</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;carModel&quot;</span><span class="o">,</span> <span class="n">carModel</span><span class="o">);</span>
                <span class="n">model</span><span class="o">.</span><span class="na">addAttribute</span><span class="o">(</span><span class="s">&quot;listCarBrand&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>

                <span class="k">return</span> <span class="s">&quot;modelForm&quot;</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span>  <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/edit-model/{idModel}&quot;</span> <span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">POST</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">String</span> <span class="nf">updateModel</span><span class="o">(</span><span class="n">CarModel</span> <span class="n">carModel</span><span class="o">)</span> <span class="o">{</span>

                <span class="kt">int</span> <span class="n">idBrand</span> <span class="o">=</span> <span class="n">carModel</span><span class="o">.</span><span class="na">getIdBrand</span><span class="o">();</span>
                <span class="n">carModel</span><span class="o">.</span><span class="na">setCarBrand</span><span class="o">(</span><span class="n">carBrandService</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">idBrand</span><span class="o">));</span>

                <span class="n">carModelService</span><span class="o">.</span><span class="na">saveOrUpdate</span><span class="o">(</span><span class="n">carModel</span><span class="o">);</span>
                <span class="k">return</span> <span class="s">&quot;redirect:/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/pdfReport&quot;</span><span class="o">,</span> <span class="s">&quot;/&quot;</span><span class="o">+</span><span class="n">INSTRUMENT</span><span class="o">+</span><span class="s">&quot;/xlsxReport.xlsx&quot;</span><span class="o">},</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
        <span class="kd">public</span> <span class="n">ModelAndView</span> <span class="nf">downloadReport</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="s">&quot;view&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">view</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">ModelAndView</span> <span class="n">modelAndView</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ModelAndView</span><span class="o">();</span>

                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarBrand</span><span class="o">&gt;</span> <span class="n">listCarBrand</span> <span class="o">=</span> <span class="n">carBrandService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="n">List</span><span class="o">&lt;</span><span class="n">CarModel</span><span class="o">&gt;</span> <span class="n">listCarModel</span> <span class="o">=</span> <span class="n">carModelService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>
                <span class="c1">// return a view which will be resolved by an ResourceBundleViewResolver</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carBrands&quot;</span><span class="o">,</span> <span class="n">listCarBrand</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">addObject</span><span class="o">(</span><span class="s">&quot;carModels&quot;</span><span class="o">,</span> <span class="n">listCarModel</span><span class="o">);</span>
                <span class="n">modelAndView</span><span class="o">.</span><span class="na">setViewName</span><span class="o">(</span><span class="n">view</span><span class="o">);</span>

                <span class="k">return</span> <span class="n">modelAndView</span><span class="o">;</span>
        <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
<p>Опять же, все 3 класса идентичны и отличаются только переменными, соответствующими их названиям.
Это сделано для независимости реализаций каждого варианта доступа.</p>
<p><a class="reference external" href="https://github.com/Xen4n/CRUD_docs/blob/master/docs/_static/resources.7z?raw=true">Скачаь ресурсы</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Оглавление</a></h3>
  <ul>
<li><a class="reference internal" href="#">Наполнение сервера</a><ul>
<li><a class="reference internal" href="#id2">Привязка к базе</a></li>
<li><a class="reference internal" href="#id3">Создание сущностей</a></li>
<li><a class="reference internal" href="#id4">Настройка конфигураций запросов</a></li>
<li><a class="reference internal" href="#id5">Настройка доступа к данными</a></li>
<li><a class="reference internal" href="#id6">Создание сервисов</a></li>
<li><a class="reference internal" href="#id7">Вывод данных в файл</a></li>
<li><a class="reference internal" href="#id8">Создание контроллеров</a></li>
</ul>
</li>
</ul>

  <h4>Предыдущий раздел</h4>
  <p class="topless"><a href="createproject.html"
                        title="предыдущая глава">Создание проекта</a></p>
  <h4>Следующий раздел</h4>
  <p class="topless"><a href="frontend.html"
                        title="следующая глава">Создание страниц и оформления</a></p>
  <div role="note" aria-label="source link">
    <h3>Эта страница</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/server-base.txt"
            rel="nofollow">Исходный текст</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Быстрый поиск</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Искать" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Навигация</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="Алфавитный указатель"
             >указатель</a></li>
        <li class="right" >
          <a href="frontend.html" title="Создание страниц и оформления"
             >вперёд</a> |</li>
        <li class="right" >
          <a href="createproject.html" title="Создание проекта"
             >назад</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Документация CRUD_docs 1</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Dmitriy, Vladimir.
    </div>
  </body>
</html>